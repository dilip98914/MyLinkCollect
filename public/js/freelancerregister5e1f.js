function registerSubmit() { var s = $("#baseurl").val() + "auth/freelancercreate", e = $("#countryname").val(), o = $("#phonecode").val(), t = $("#filename").val(), a = $("#originalimage").val(), l = ""; if (!o) return toastr.error("Please select phone code", "Error", { closeButton: !0, positionClass: "toast-bottom-left", timeOut: 5e3 }), !1; if ("" != $("#countryname").val() && (e = $("#countryname").val()), l = "" != $("#locationselect").val() ? $("#locationselect").val() : "", "" != $("#location").val() && (l = $("#location").val()), 0 == validateEmail($("#email").val().toLowerCase().trim())) return toastr.error("Invalid Email Address", "Error", { closeButton: !0, positionClass: "toast-bottom-left", timeOut: 5e3 }), !1; var i = []; if ($(".skillname").each(function () { var s = $(this).text(); i.push(s) }), !t) return toastr.error("Please Choose Resume", "Error", { closeButton: !0, positionClass: "toast-bottom-left", timeOut: 5e3 }), !1; if (0 == i.length) return toastr.error("Please Select skills", "Error", { closeButton: !0, positionClass: "toast-bottom-left", timeOut: 5e3 }), !1; if (15 < i.length) return toastr.error("Skills not exceed 15", "Error", { closeButton: !0, positionClass: "toast-bottom-left", timeOut: 5e3 }), !1; if (!$("#agree").prop("checked")) return toastr.error("Please check Terms & Conditions", "Error", { closeButton: !0, positionClass: "toast-bottom-left", timeOut: 5e3 }), !1; var n = { fname: $("#fname").val().trim(), lname: $("#lname").val().trim(), phonecode: o, phone: $("#phone").val().trim(), loginType: 4, location: l, locationselect: l, currentcountry: e, locationId: "", email: $("#email").val().toLowerCase().trim(), password: $("#password").val(), skill: i, filename: t, originalimage: a }; $("#registerbtn").css({ display: "none" }), $("#loginstt2").css({ display: "block" }), $("#registerbtn").prop("disabled", !0), $(".regloader").css({ display: "inline-block" }), $.ajax({ type: "POST", url: s, data: n, success: function (s) { var e; "success" == s.confirmation ? ($(".regloader").css({ display: "none" }), $("#registerbtn").css({ display: "none" }), $("#loginstt2").css({ display: "block" }), e = "Thanks for your Registration. Please click on the email verification link sent at ", e += $("#email").val(), toastr.success(e, "Success", { closeButton: !0, positionClass: "toast-bottom-left", timeOut: 5e3 }), loginSubmit($("#email").val(), $("#password").val())) : "required" == s.confirmation ? ($("#registerbtn").prop("disabled", !1), $(".regloader").css({ display: "none" }), $("#registerbtn").css({ display: "block" }), $("#loginstt2").css({ display: "none" }), $("#" + s.focusid).focus(), toastr.error(s.message, "Error", { closeButton: !0, positionClass: "toast-bottom-left", timeOut: 5e3 })) : "filetype" == s.confirmation ? ($("#registerbtn").prop("disabled", !1), $(".regloader").css({ display: "none" }), $("#registerbtn").css({ display: "block" }), $("#loginstt2").css({ display: "none" }), toastr.error("Choose only PDF, DOC and DOCX", "Error", { closeButton: !0, positionClass: "toast-bottom-left", timeOut: 5e3 })) : ($("#registerbtn").prop("disabled", !1), $(".regloader").css({ display: "none" }), $("#registerbtn").css({ display: "block" }), $("#loginstt2").css({ display: "none" }), toastr.error("Already Registered!!", "Error", { closeButton: !0, positionClass: "toast-bottom-left", timeOut: 5e3 })) }, error: function (s) { $("#registerbtn").prop("disabled", !1), $(".regloader").css({ display: "none" }), $("#registerbtn").css({ display: "block" }), $("#loginstt2").css({ display: "none" }), toastr.error("Already Registered!!", "Error", { closeButton: !0, positionClass: "toast-bottom-left", timeOut: 5e3 }) } }) } function loginSubmit() { var s = $("#baseurl").val() + "auth/login"; $.ajax({ type: "POST", url: s, data: { email: $("#email").val(), password: $("#password").val() }, success: function (s) { var e; "success" == s.confirmation && (e = s.data, localStorage.setItem("onbechmarktokenuser", s.token), localStorage.removeItem("obmredirection"), 1 != e.loginType ? setTimeout(function () { window.location = "/onbench/business" }, 2e3) : setTimeout(function () { window.location = "/onbench/admin" }, 2e3)) }, error: function (s) { toastr.error("Invalid login details!!") } }) } function fieldcheck(s, e) { var o = !1; "fname" == e && ($("#" + e).val() ? (o = !0, $("#" + s).css({ display: "none" })) : ($("#" + s).css({ display: "block" }), o = !1)), "lname" == e && ($("#" + e).val() ? (o = !0, $("#" + s).css({ display: "none" })) : ($("#" + s).css({ display: "block" }), o = !1)), "phonecode" == e && ($("#" + e).val() ? (o = !0, $("#" + s).css({ display: "none" })) : ($("#" + s).css({ display: "block" }), o = !1)), "phone" == e && (/^(?:[1-9]\d*|\d)$/.test($("#" + e).val()) ? (o = !0, $("#" + s).css({ display: "none" })) : (o = !1, $("#" + s).css({ display: "block" })), $("#" + e).val().length < 10 || 12 < $("#" + e).val().length ? (o = !1, $("#" + s).css({ display: "block" })) : (o = !0, $("#" + s).css({ display: "none" }))), "email" == e && ($("#" + e).val() && /^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test($("#" + e).val()) ? (o = !0, $("#" + s).css({ display: "none" })) : (o = !1, $("#" + s).css({ display: "block" }))), "password" == e && ($("#" + e).val() ? (o = !0, $("#" + s).css({ display: "none" })) : ($("#" + s).css({ display: "block" }), o = !1)), o && "" != $("#fname").val() && "" != $("#lname").val() && "" != $("#phonecode").val() && "" != $("#phone").val() && "" != $("#email").val() && "" != $("#password").val() ? $("#registerbtn").prop("disabled", !1) : $("#registerbtn").prop("disabled", !0) } function cancellogin() { $("#alreadtstt").css({ display: "block" }), $("#alreadtstt2").css({ display: "none" }) } function logoutotherdevice() { $.ajax({ type: "POST", url: "http://localhost:3001/auth/logoutalldevice", data: { email: $("#email").val(), password: $("#password").val() }, success: function (s) { "success" == s.confirmation && loginSubmit() }, error: function (s) { toastr.error("Please Try After Sometime!!") } }) } function validateEmail(s) { return 0 != /^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/.test(s) } function checkmailvalid(s) { var e = []; if (0 < s.indexOf("@")) return e = s.split("@"), !(0 < ["hotmail.com", "yahoo.com", "yahoo.co.in", "aol.com", "abc.com", "xyz.com", "pqr.com", "rediff.com", "rediffmail.com", "live.com", "outlook.com", "msn.com", "me.com", "ymail.com", "gmail.com"].filter(function (s) { return s == e[1].toLowerCase() }).length) } function get_city(s) { var e = { city_name: { $regex: "^" + s, $options: "i" } }, o = $("#baseurl").val() + "notoken/city?filter="; $(".city_loader").css({ display: "block" }), $.ajax({ type: "GET", url: o + JSON.stringify(e), success: function (s) { var e = s.data; $(".city_loader").css({ display: "none" }), html = '<span class="closecity" onclick="closecity()"> X</span>'; for (var o, t, a = 0; a < e.length; a++)0, o = e[a].city_name.replace(/\s/g, "-"), t = e[a].country_id.country_name.replace(/\s/g, "-"), html += '<a  onclick=setvalue("' + o + '","' + e[a]._id + '",' + a + ',"' + t + '")>', html += e[a].city_name + "(" + e[a].country_id.country_name + ")", html += "</a>"; html += '<a  href="javascript:void(0)" onclick="setOther()">Other City</a>', $(".displayblock").css({ display: "block" }).html(html) }, error: function (s) { $(".city_loader").css({ display: "none" }) } }) } function closecity() { $(".displayblock").css({ display: "none" }) } function setvalue(s, e, o, t) { $("#locationselect").val(s.replace(/-/g, " ")), $("#countryname").val(t.replace(/-/g, " ")), $(".displayblock").css({ display: "none" }) } function setOther() { $("#otherlocation").css({ display: "none" }), $("#otherlocation2").css({ display: "block" }) } function resetdata() { $("#otherlocation").css({ display: "block" }), $("#otherlocation2").css({ display: "none" }), $(".displayblock").css({ display: "none" }), $("#locationselect").val("") } function isNumber(s) { var e = (s = s || window.event).which ? s.which : s.keyCode; return !(31 < e && (e < 48 || 57 < e)) } function getcountrycode() { var l = $("#baseurl").val(), s = l + "auth/getcountrycode"; $.ajax({ type: "GET", url: s, success: function (s) { for (var e, o = "", t = s.countrylist, a = 0; a < t.length; a++)o += '<li class="list-all-code" style="display: block;" flag="' + t[a].images + '" relcode="' + t[a].phoneCode + '" relcountry="' + t[a].country_name + '">', o += '<a id="c_' + a + '_c" href="javascript:void(0)" relc="' + t[a].country_name + '" onclick=setcountrycode("' + t[a].phoneCode + '","' + t[a].images + '","c_' + a + '_c")>', o += '<img src="' + l + "images/flags/16size/" + t[a].images + '">&nbsp;+' + t[a].phoneCode + "&nbsp;" + t[a].country_name, o += " </a>", o += "</li>"; $(".dropdown-inner").html(o), null != s.countrydata && (e = "<img src='" + l + "images/flags/16size/" + s.countrydata.images + "'/> + " + s.countrydata.phoneCode, $("#sltpc").html(e), $("#countryname").val(s.countrydata.country_name), $("#phonecode").val(s.countrydata.phoneCode)) }, error: function (s) { } }) } function searchcountry(s) { var e = s; e ? isNaN(e) ? (e = s.toLowerCase(), $(".list-all-code").each(function () { -1 != $(this).attr("relcountry").toLowerCase().indexOf(e) ? $(this).css({ display: "block" }) : $(this).css({ display: "none" }) })) : (e = parseInt(s), $(".list-all-code").each(function () { parseInt($(this).attr("relcode")) != e ? $(this).css({ display: "none" }) : $(this).css({ display: "block" }) })) : $(".list-all-code").each(function () { $(this).css({ display: "block" }) }) } function setcountrycode(s, e, o) { var t = "<img src='" + $("#baseurl").val() + "images/flags/16size/" + e + "'/> + " + s; console.log(t), $("#sltpc").html(t), $("#countryname").val($("#" + o).attr("relc")), $("#phonecode").val(s) } function get_skill_data(s) { var e = s, o = 0; if (e) { if ($(".drop2").css({ display: "block" }), -1 != (e = s.toLowerCase()).indexOf(",")) { console.log("lenstt", e.indexOf(",")); for (var t, a, l = e.split(","), i = "", n = 0; n < l.length; n++) { l[n] && (t = new Date, i = "", i += '<span class="skill-list-inner" id="' + (a = Date.parse(t) + "_" + n) + '">', i += '<span class="skillname">' + l[n] + "</span>", i += '<span class="close-btn" onclick=closeskill("' + a + '")> X </span>', i += "</span>", $(".main-top").append(i)) } $(".skills-write").val(""), $(".skills-write").focus() } else $(".skill_list").each(function () { -1 != $(this).attr("rel").toLowerCase().indexOf(e) ? (o += 1, $(this).css({ display: "block" })) : $(this).css({ display: "none" }) }); 0 == o && $(".drop2").css({ display: "none" }) } else $(".drop2").css({ display: "none" }) } function getskills() { var s = $("#baseurl").val() + "notoken/skill?filter="; $.ajax({ type: "GET", url: s + JSON.stringify({}), success: function (s) { for (var e = s.data, o = "", t = 0; t < e.length; t++)o += '<a href="javascript:void(0)" class="skill_list" onclick=setskills("' + e[t]._id + '") id="' + e[t]._id + '" rel="' + e[t].name + '">' + e[t].name + "</a>"; $(".drop2").html(o) }, error: function (s) { } }) } function setskills(s) { var e = ""; e += '<span class="skill-list-inner" id="' + s + '">', e += '<span class="skillname">' + $("#" + s).attr("rel") + "</span>", e += '<span class="close-btn" onclick=closeskill("' + s + '")> X </span>', e += "</span>", $(".main-top").append(e), $(".skills-write").val(""), $(".skills-write").focus(), $(".drop2").css({ display: "none" }) } function closeskill(s) { $("#" + s).remove() } function resumeupload() { var s = new FormData; s.append("image", $(".file-upload")[0].files[0]), $(".progress-div").css({ display: "block" }), $(".small-loader").css({ display: "inline-block" }), $(".close-file-btn").css({ display: "none" }), $.ajax({ xhr: function () { var s = new window.XMLHttpRequest; return s.upload.addEventListener("progress", function (s) { var e; s.lengthComputable && (e = parseInt(s.loaded / s.total * 100), $(".progress-bar").width(e + "%"), $(".progress-bar").html(e + "%")) }, !1), s }, type: "POST", url: "/auth/registerfreelancer_upload", data: s, contentType: !1, cache: !1, processData: !1, beforeSend: function () { $(".progress-bar").width("0%"), $("#uploadStatus").html('<img src="images/loading.gif"/>') }, error: function () { $(".small-loader").css({ display: "none" }), $(".close-file-btn").css({ display: "inline-block" }) }, success: function (s) { "success" == s.confirmation ? ($("#filename").val(s.image), $("#originalimage").val(s.originalimage), $(".small-loader").css({ display: "none" }), $(".close-file-btn").css({ display: "inline-block" })) : ("error" == s.confirmation || ("filetype" == s.confirmation && $(".file-upload").val(null), $(".progress-div").css({ display: "none" })), $(".small-loader").css({ display: "none" }), $(".close-file-btn").css({ display: "inline-block" }), toastr.error("Choose only PDF, DOC and DOCX", "Error", { closeButton: !0, positionClass: "toast-bottom-left", timeOut: 5e3 })) } }) } function resetfile() { $(".upload-div").css({ display: "block" }), $(".progress-div").css({ display: "none" }), $(".progress-bar").width("0%"), $(".file-upload").val(null), $("#filename").val() && $.ajax({ type: "POST", url: "/auth/delete_upload_file", data: { name: $("#filename").val() }, dataType: "json", error: function () { }, success: function (s) { "success" == s.confirmation || resp } }) } function changepwd() { "hide" == $(".toggle-password").attr("rel") ? ($(".toggle-password").attr("rel", "show"), $(".view-pwd").css({ display: "block" }), $(".hide-pwd").css({ display: "none" }), $("#password").attr("type", "text")) : ($(".toggle-password").attr("rel", "hide"), $(".view-pwd").css({ display: "none" }), $(".hide-pwd").css({ display: "block" }), $("#password").attr("type", "password")) } getskills();